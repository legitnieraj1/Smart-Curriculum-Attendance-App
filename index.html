<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Curriculum & Attendance App</title>

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/face-api.js/0.22.2/face-api.min.js"></script>
    <script src="https://unpkg.com/@zxing/library@latest"></script>

    <!-- Supabase client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.48.0/dist/umd/supabase.js"></script>
    <script>
        const SUPABASE_URL = 'https://crqeqejgdrjujsuvihsx.supabase.co';
        const SUPABASE_ANON_KEY = 'sb_secret_TfOG0HU-NbfngLL2Udr5_g_AVx6_AmI';

        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .tagline {
            color: #666;
            font-size: 1.1em;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            border: none;
            background: #667eea;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .tab-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: #764ba2;
            box-shadow: 0 4px 15px rgba(118, 75, 162, 0.4);
        }

        .content-section {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .attendance-method {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 8px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .attendance-method:hover {
            background: #e8ebff;
        }

        .attendance-method.selected {
            background: #667eea;
            color: white;
        }

        .icon {
            font-size: 2em;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn:hover {
            background: #764ba2;
            transform: scale(1.05);
        }

        .attendance-display {
            background: #1a1a2e;
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-top: 20px;
        }

        .student-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .student-badge {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s;
        }

        .student-badge.present {
            background: rgba(76, 175, 80, 0.3);
            border: 2px solid #4CAF50;
        }

        .student-badge.absent {
            background: rgba(244, 67, 54, 0.3);
            border: 2px solid #f44336;
        }

        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .schedule-table th,
        .schedule-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .schedule-table th {
            background: #667eea;
            color: white;
        }

        .schedule-table tr:hover {
            background: #f8f9ff;
        }

        .time-slot {
            display: inline-block;
            padding: 5px 15px;
            background: #e8ebff;
            border-radius: 20px;
            font-weight: bold;
            color: #667eea;
        }

        .free-period {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .activity-suggestion {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
        }

        .activity-suggestion h4 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .activity-list {
            list-style: none;
        }

        .activity-list li {
            padding: 12px;
            background: rgba(255, 255, 255, 0.2);
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: white;
        }

        .qr-display {
            text-align: center;
            padding: 30px;
            background: #f8f9ff;
            border-radius: 12px;
            margin-top: 20px;
        }

        .qr-placeholder {
            width: 250px;
            height: 250px;
            margin: 20px auto;
            background: white;
            border: 3px solid #667eea;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
        }

        #qrcode {
            display: inline-block;
        }

        .camera-container {
            position: relative;
            width: 100%;
            max-width: 640px;
            margin: 20px auto;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
        }

        #video,
        #captureCanvas,
        #scannerVideo {
            width: 100%;
            display: block;
            border-radius: 12px;
        }

        #captureCanvas,
        #scannerCanvas {
            display: none;
        }

        .camera-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .face-overlay {
            position: absolute;
            border: 3px solid #4CAF50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .recognition-status {
            text-align: center;
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            font-weight: bold;
        }

        .recognition-status.success {
            background: #4CAF50;
            color: white;
        }

        .recognition-status.processing {
            background: #ffc107;
            color: #333;
        }

        .recognition-status.error {
            background: #f44336;
            color: white;
        }

        .face-setup-form {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
        }

        .enrolled-faces {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .face-card {
            background: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .face-card img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .face-card .name {
            font-size: 0.9em;
            font-weight: bold;
            color: #667eea;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .success-message {
            background: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }

        .success-message.show {
            display: block;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from {
                transform: translateX(-100%);
            }

            to {
                transform: translateX(0);
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Smart Curriculum & Attendance App</h1>
            <p class="tagline">Automated Attendance & Personalized Learning Management</p>

            <div class="nav-tabs">
                <button class="tab-btn active" onclick="showTab('home')">Home</button>
                <button class="tab-btn" onclick="showTab('studentLogin')">Student Login</button>
                <button class="tab-btn" onclick="showTab('attendance')">Mark Attendance</button>
                <button class="tab-btn" onclick="showTab('schedule')">Daily Schedule</button>
                <button class="tab-btn" onclick="showTab('activities')">Free Period Activities</button>
                <button class="tab-btn" onclick="showTab('dashboard')">Dashboard</button>
            </div>
        </header>

        <!-- Home Section -->
        <div id="home" class="content-section active">
            <h2>Welcome to Smart Curriculum Management</h2>
            <p style="margin: 20px 0; color: #666; font-size: 1.1em;">Transform your educational institution with
                automated attendance tracking and personalized student development.</p>

            <div class="grid">
                <div class="card">
                    <h3>üéØ Problem We Solve</h3>
                    <p>Manual attendance systems waste valuable instructional time. Students often lack structured
                        guidance during free periods, leading to poor time management and misalignment with academic
                        goals.</p>
                </div>

                <div class="card">
                    <h3>‚ú® Key Features</h3>
                    <ul style="list-style-position: inside; color: #666;">
                        <li>Automated attendance via QR, Bluetooth, or Face Recognition</li>
                        <li>Student login portal with QR scanning</li>
                        <li>Real-time attendance display</li>
                        <li>Personalized activity suggestions</li>
                        <li>Integrated daily routine planner</li>
                        <li>Analytics and reporting</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>üë• Beneficiaries</h3>
                    <p>Students gain structured learning time. Teachers save time on administrative tasks.
                        Administrators get accurate insights. Career counselors can track student development
                        effectively.</p>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>95%</h3>
                    <p>Time Saved</p>
                </div>
                <div class="stat-card">
                    <h3>100%</h3>
                    <p>Accuracy</p>
                </div>
                <div class="stat-card">
                    <h3>3x</h3>
                    <p>Productivity Boost</p>
                </div>
            </div>
        </div>

        <!-- Student Login Section -->
        <div id="studentLogin" class="content-section">
            <h2>Student Portal</h2>

            <div id="loginForm" class="card" style="max-width: 500px; margin: 0 auto;">
                <h3>Login to Mark Attendance</h3>
                <p style="color: #666; margin-bottom: 20px;">Enter your details to access the attendance system</p>

                <div class="input-group">
                    <label>Student Name</label>
                    <input type="text" id="loginStudentName" placeholder="Enter your full name">
                </div>

                <div class="input-group">
                    <label>Student ID</label>
                    <input type="text" id="loginStudentId" placeholder="Enter your student ID">
                </div>

                <div class="input-group">
                    <label>Class/Section</label>
                    <select id="loginStudentClass">
                        <option value="">Select your class</option>
                        <option>CS 1st Year - Section A</option>
                        <option>CS 2nd Year - Section A</option>
                        <option>CS 3rd Year - Section A</option>
                        <option>CS 4th Year - Section A</option>
                        <option>IT 1st Year - Section B</option>
                        <option>IT 2nd Year - Section B</option>
                        <option>IT 3rd Year - Section B</option>
                        <option>ECE 1st Year - Section A</option>
                        <option>ECE 2nd Year - Section A</option>
                        <option>ECE 3rd Year - Section A</option>
                        <option>ECE 4th Year - Section A</option>
                    </select>
                </div>

                <button class="btn" onclick="studentLogin()" style="width: 100%;">Login</button>
            </div>

            <div id="studentDashboard" class="card" style="display: none; max-width: 800px; margin: 0 auto;">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
                    <div>
                        <h3>Welcome, <span id="loggedStudentName"></span>!</h3>
                        <p style="color: #666;">ID: <span id="loggedStudentId"></span> | <span
                                id="loggedStudentClass"></span></p>
                    </div>
                    <button class="btn" onclick="studentLogout()" style="background: #f44336;">Logout</button>
                </div>

                <div style="background: #f8f9ff; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                    <h4 style="color: #667eea; margin-bottom: 15px;">üì± Scan QR Code to Mark Attendance</h4>
                    <p style="color: #666; margin-bottom: 15px;">Click the button below to open your camera and scan
                        the classroom QR code</p>
                    <button class="btn" onclick="openQRScanner()" style="width: 100%;">
                        üì∑ Open QR Code Scanner
                    </button>
                </div>

                <div id="qrScannerSection" style="display: none;">
                    <div class="camera-container">
                        <video id="scannerVideo" autoplay muted playsinline></video>
                        <canvas id="scannerCanvas" style="display: none;"></canvas>
                        <div id="scannerOverlay"
                            style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); border: 3px solid #4CAF50; width: 250px; height: 250px; box-shadow: 0 0 0 9999px rgba(0,0,0,0.5);">
                        </div>
                    </div>
                    <div class="camera-controls">
                        <button class="btn" onclick="closeQRScanner()" style="background: #f44336;">Close Scanner</button>
                    </div>
                    <div id="scanStatus" class="recognition-status" style="display: none;"></div>
                </div>

                <div id="attendanceHistory" style="margin-top: 30px;">
                    <h4 style="color: #667eea; margin-bottom: 15px;">üìä Your Attendance History</h4>
                    <div id="historyList"></div>
                </div>
            </div>
        </div>

        <!-- Attendance Section -->
        <div id="attendance" class="content-section">
            <h2>Mark Attendance</h2>

            <div class="grid">
                <div class="card">
                    <h3>Select Attendance Method</h3>

                    <div class="attendance-method" onclick="selectMethod('qr')">
                        <span class="icon">üì±</span>
                        <div>
                            <strong>QR Code Scan</strong>
                            <p style="color: #666; font-size: 0.9em;">Students scan classroom QR code</p>
                        </div>
                    </div>

                    <div class="attendance-method" onclick="selectMethod('proximity')">
                        <span class="icon">üì°</span>
                        <div>
                            <strong>Bluetooth/Wi-Fi Proximity</strong>
                            <p style="color: #666; font-size: 0.9em;">Automatic detection when in range</p>
                        </div>
                    </div>

                    <div class="attendance-method" onclick="selectMethod('face')">
                        <span class="icon">üòä</span>
                        <div>
                            <strong>Face Recognition</strong>
                            <p style="color: #666; font-size: 0.9em;">AI-powered facial identification</p>
                        </div>
                    </div>

                    <button class="btn" onclick="startAttendance()">Start Attendance</button>
                    <button class="btn" onclick="openFaceSetup()" style="background: #4CAF50; margin-left: 10px;">Setup
                        Face Recognition</button>
                </div>

                <div class="card" id="faceDisplay" style="display: none;">
                    <h3>Face Recognition Attendance</h3>
                    <div class="camera-container">
                        <video id="video" autoplay muted playsinline></video>
                        <canvas id="captureCanvas"></canvas>
                    </div>
                    <div class="camera-controls">
                        <button class="btn" onclick="startCamera()">Start Camera</button>
                        <button class="btn" onclick="stopCamera()" style="background: #f44336;">Stop Camera</button>
                        <button class="btn" onclick="captureAttendance()" style="background: #4CAF50;">Mark
                            Attendance</button>
                    </div>
                    <div id="recognitionStatus" class="recognition-status" style="display: none;"></div>
                </div>

                <div class="card" id="qrDisplay" style="display: none;">
                    <div class="qr-display">
                        <h3>Scan QR Code</h3>
                        <div class="qr-placeholder">
                            <div id="qrcode"></div>
                        </div>
                        <p style="color: #666;">Students: Open your app and scan this QR code to mark attendance</p>
                        <p style="color: #667eea; font-weight: bold; margin-top: 10px;">Class: Computer Science 101</p>
                        <p style="color: #999; font-size: 0.9em; margin-top: 5px;">Section A | 10:00 AM - 11:00 AM</p>
                    </div>
                </div>
            </div>

            <div class="attendance-display">
                <h3>üìä Live Attendance - Computer Science 101</h3>
                <p style="margin-top: 10px; opacity: 0.8;">Section A | 10:00 AM - 11:00 AM</p>

                <div style="display: flex; gap: 30px; margin: 20px 0; flex-wrap: wrap;">
                    <div><strong>Total:</strong> 45</div>
                    <div style="color: #4CAF50;"><strong>Present:</strong> <span id="presentCount">38</span></div>
                    <div style="color: #f44336;"><strong>Absent:</strong> <span id="absentCount">7</span></div>
                    <div style="color: #ffc107;"><strong>Percentage:</strong> <span id="percentage">84%</span></div>
                </div>

                <div class="student-list" id="studentList"></div>
            </div>

            <div class="success-message" id="successMsg">
                ‚úì Attendance marked successfully!
            </div>
        </div>

        <!-- Schedule Section -->
        <div id="schedule" class="content-section">
            <h2>Daily Schedule</h2>

            <div class="input-group">
                <label>Select Student</label>
                <select id="studentSelect" onchange="loadSchedule()">
                    <option>Rahul Sharma - CS 3rd Year</option>
                    <option>Priya Patel - IT 2nd Year</option>
                    <option>Amit Kumar - ECE 4th Year</option>
                </select>
            </div>

            <table class="schedule-table">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Subject/Activity</th>
                        <th>Location</th>
                        <th>Type</th>
                    </tr>
                </thead>
                <tbody id="scheduleBody">
                    <tr>
                        <td><span class="time-slot">09:00 - 10:00</span></td>
                        <td>Data Structures</td>
                        <td>Room 301</td>
                        <td>Lecture</td>
                    </tr>
                    <tr>
                        <td><span class="time-slot">10:00 - 11:00</span></td>
                        <td>Database Management</td>
                        <td>Lab 2</td>
                        <td>Practical</td>
                    </tr>
                    <tr class="free-period">
                        <td><span class="time-slot">11:00 - 12:00</span></td>
                        <td><strong>Free Period</strong></td>
                        <td>Library/Self-study</td>
                        <td>Personal Development</td>
                    </tr>
                    <tr>
                        <td><span class="time-slot">12:00 - 13:00</span></td>
                        <td>Operating Systems</td>
                        <td>Room 205</td>
                        <td>Lecture</td>
                    </tr>
                    <tr>
                        <td><span class="time-slot">13:00 - 14:00</span></td>
                        <td>Lunch Break</td>
                        <td>Cafeteria</td>
                        <td>Break</td>
                    </tr>
                    <tr>
                        <td><span class="time-slot">14:00 - 15:00</span></td>
                        <td>Computer Networks</td>
                        <td>Room 402</td>
                        <td>Lecture</td>
                    </tr>
                    <tr class="free-period">
                        <td><span class="time-slot">15:00 - 16:00</span></td>
                        <td><strong>Free Period</strong></td>
                        <td>Library/Self-study</td>
                        <td>Personal Development</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Activities Section -->
        <div id="activities" class="content-section">
            <h2>Free Period Activities</h2>

            <div class="card">
                <h3>Personalization Profile</h3>

                <div class="input-group">
                    <label>Career Goal</label>
                    <select id="careerGoal">
                        <option>Software Developer</option>
                        <option>Data Scientist</option>
                        <option>UI/UX Designer</option>
                        <option>System Administrator</option>
                        <option>Cybersecurity Specialist</option>
                    </select>
                </div>

                <div class="input-group">
                    <label>Interests (Select multiple)</label>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                        <label style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox" checked> Programming
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox"> Design
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox" checked> Algorithms
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox"> Networking
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox"> AI/ML
                        </label>
                    </div>
                </div>

                <button class="btn" onclick="generateActivities()">Generate Activities</button>
            </div>

            <div class="activity-suggestion" id="activitySuggestions">
                <h4>üìã Recommended Activities for Free Period (11:00 - 12:00)</h4>
                <ul class="activity-list">
                    <li>üíª Complete LeetCode daily challenge (Algorithms practice)</li>
                    <li>üìö Read Chapter 5 of "Clean Code" (Career development)</li>
                    <li>üéØ Work on personal project: E-commerce website</li>
                    <li>üë• Attend coding club meetup in Room 301</li>
                    <li>üìù Review class notes and prepare for upcoming exam</li>
                </ul>

                <h4 style="margin-top: 25px;">üìã Afternoon Free Period (15:00 - 16:00)</h4>
                <ul class="activity-list">
                    <li>üèãÔ∏è Physical activity: Campus gym or sports</li>
                    <li>üé® Work on UI design mockups for class project</li>
                    <li>üìñ Study group session for Operating Systems</li>
                    <li>üíº Research internship opportunities</li>
                    <li>üßò Mindfulness and stress management session</li>
                </ul>

                <div
                    style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.2); border-radius: 10px;">
                    <h4>üé• Recommended Learning Video</h4>
                    <p style="margin: 10px 0;">Based on your career goal and interests, watch this video:</p>
                    <a id="youtubeLink" href="#" target="_blank"
                        style="color: white; font-weight: bold; text-decoration: underline; font-size: 1.1em;">
                        Loading recommended video...
                    </a>
                </div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard" class="content-section">
            <h2>Analytics Dashboard</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>92%</h3>
                    <p>Average Attendance</p>
                </div>
                <div class="stat-card">
                    <h3>156</h3>
                    <p>Total Students</p>
                </div>
                <div class="stat-card">
                    <h3>8.5h</h3>
                    <p>Avg. Daily Study Time</p>
                </div>
                <div class="stat-card">
                    <h3>45</h3>
                    <p>Active Classes</p>
                </div>
            </div>

            <div class="grid" style="margin-top: 30px;">
                <div class="card">
                    <h3>üìà Weekly Attendance Trend</h3>
                    <p style="color: #666; margin-top: 15px;">Monday: 94% | Tuesday: 91% | Wednesday: 93%</p>
                    <p style="color: #666;">Thursday: 90% | Friday: 88%</p>
                    <p style="margin-top: 15px; color: #4CAF50; font-weight: bold;">‚Üë 3% increase from last week</p>
                </div>

                <div class="card">
                    <h3>üéØ Top Activities Completed</h3>
                    <ul style="list-style: none; color: #666; margin-top: 15px;">
                        <li style="padding: 8px 0;">‚úì Coding Practice - 1,234 sessions</li>
                        <li style="padding: 8px 0;">‚úì Group Study - 892 sessions</li>
                        <li style="padding: 8px 0;">‚úì Reading - 654 sessions</li>
                        <li style="padding: 8px 0;">‚úì Project Work - 543 sessions</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>‚ö†Ô∏è Alerts & Notifications</h3>
                    <div style="margin-top: 15px;">
                        <p style="padding: 10px; background: #fff3cd; border-radius: 6px; margin-bottom: 10px;">
                            <strong>Low Attendance:</strong> 5 students below 75%
                        </p>
                        <p style="padding: 10px; background: #d4edda; border-radius: 6px;">
                            <strong>Success:</strong> 92% overall attendance this month
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Face Recognition Setup Modal -->
        <div id="faceSetupModal" class="modal">
            <div class="modal-content">
                <h2 style="color: #667eea; margin-bottom: 20px;">Face Recognition Setup</h2>

                <div class="face-setup-form">
                    <div class="input-group">
                        <label>Student Name</label>
                        <input type="text" id="studentName" placeholder="Enter student name">
                    </div>

                    <div class="input-group">
                        <label>Student ID</label>
                        <input type="text" id="studentId" placeholder="Enter student ID">
                    </div>

                    <div class="input-group">
                        <label>Class/Section</label>
                        <select id="studentClass">
                            <option>CS 3rd Year - Section A</option>
                            <option>IT 2nd Year - Section B</option>
                            <option>ECE 4th Year - Section A</option>
                        </select>
                    </div>
                </div>

                <div class="camera-container">
                    <video id="setupVideo" autoplay muted playsinline></video>
                    <canvas id="setupCanvas"></canvas>
                </div>

                <div class="camera-controls">
                    <button class="btn" onclick="startSetupCamera()">Start Camera</button>
                    <button class="btn" onclick="captureFaceData()" style="background: #4CAF50;">Capture Face</button>
                    <button class="btn" onclick="closeFaceSetup()" style="background: #f44336;">Close</button>
                </div>

                <div id="setupStatus" class="recognition-status" style="display: none;"></div>

                <div class="enrolled-faces" id="enrolledFaces">
                    <h3 style="grid-column: 1/-1; color: #667eea;">Enrolled Students</h3>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedMethod = '';
        let qrCodeGenerated = false;
        let video = null;
        let setupVideo = null;
        let stream = null;
        let setupStream = null;
        let faceApiLoaded = false;
        let enrolledFaces = [];
        let scannerStream = null;
        let scannerVideo = null;
        let codeReader = null;
        let loggedInStudent = null;
        let isScanning = false;

        const students = [
            'Rahul Sharma', 'Priya Patel', 'Amit Kumar', 'Sneha Singh', 'Arjun Reddy',
            'Neha Gupta', 'Vikram Shah', 'Anjali Verma', 'Rohan Desai', 'Kavya Iyer',
            'Sanjay Nair', 'Divya Rao', 'Karan Mehta', 'Pooja Joshi', 'Aditya Pillai',
            'Riya Kapoor', 'Varun Bhat', 'Shruti Menon', 'Harsh Agarwal', 'Meera Nambiar',
            'Nikhil Sharma', 'Tanya Khanna', 'Vishal Kumar', 'Ananya Iyer', 'Suresh Reddy',
            'Lakshmi Naidu', 'Rakesh Patel', 'Swati Deshmukh', 'Mahesh Kulkarni', 'Deepika Rao',
            'Akash Jain', 'Manisha Shah', 'Praveen Kumar', 'Shalini Nair', 'Gaurav Singh',
            'Nisha Menon', 'Ravi Shankar', 'Preeti Gupta', 'Sachin Iyer', 'Vandana Reddy',
            'Arun Pillai', 'Smita Verma', 'Dinesh Kulkarni', 'Rekha Nambiar', 'Sunil Mehta'
        ];

        const careerVideos = {
            'Software Developer': {
                title: 'Complete Web Development Roadmap 2024',
                url: 'https://www.youtube.com/watch?v=u72H_zZzkcw'
            },
            'Data Scientist': {
                title: 'Data Science Full Course - Learn Data Science in 10 Hours',
                url: 'https://www.youtube.com/watch?v=ua-CiDNNj30'
            },
            'UI/UX Designer': {
                title: 'UI/UX Design Tutorial - From Zero to Hero',
                url: 'https://www.youtube.com/watch?v=c9Wg6Cb_YlU'
            },
            'System Administrator': {
                title: 'System Administration Complete Course',
                url: 'https://www.youtube.com/watch?v=V1JdU_dCWvk'
            },
            'Cybersecurity Specialist': {
                title: 'Cybersecurity Full Course for Beginners',
                url: 'https://www.youtube.com/watch?v=U_P23SqJaDc'
            }
        };

        // Load Face-API models
        async function loadFaceApi() {
            if (faceApiLoaded) return;

            const MODEL_URL = 'https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model/';

            try {
                await faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL);
                await faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL);
                await faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL);
                faceApiLoaded = true;
                console.log('Face-API models loaded successfully');
            } catch (error) {
                console.error('Error loading Face-API models:', error);
                alert('Face recognition models are loading. This may take a moment...');
            }
        }

        // Student Login Functions
        function studentLogin() {
            const name = document.getElementById('loginStudentName').value.trim();
            const id = document.getElementById('loginStudentId').value.trim();
            const studentClass = document.getElementById('loginStudentClass').value;

            if (!name || !id || !studentClass) {
                alert('Please fill in all fields');
                return;
            }

            loggedInStudent = {
                name: name,
                id: id,
                class: studentClass,
                loginTime: new Date().toISOString()
            };

            sessionStorage.setItem('loggedInStudent', JSON.stringify(loggedInStudent));

            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('studentDashboard').style.display = 'block';
            document.getElementById('loggedStudentName').textContent = name;
            document.getElementById('loggedStudentId').textContent = id;
            document.getElementById('loggedStudentClass').textContent = studentClass;

            loadAttendanceHistory();
        }

        function studentLogout() {
            loggedInStudent = null;
            sessionStorage.removeItem('loggedInStudent');

            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('studentDashboard').style.display = 'none';
            document.getElementById('qrScannerSection').style.display = 'none';

            document.getElementById('loginStudentName').value = '';
            document.getElementById('loginStudentId').value = '';
            document.getElementById('loginStudentClass').value = '';

            if (scannerStream) {
                closeQRScanner();
            }
        }

        // QR Scanner Functions
        async function openQRScanner() {
            if (!loggedInStudent) {
                alert('Please login first');
                return;
            }

            document.getElementById('qrScannerSection').style.display = 'block';
            scannerVideo = document.getElementById('scannerVideo');

            try {
                scannerStream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: 'environment', width: 640, height: 480 }
                });
                scannerVideo.srcObject = scannerStream;

                showScanStatus('Scanner ready! Point camera at QR code', 'processing');

                if (!codeReader) {
                    codeReader = new ZXing.BrowserQRCodeReader();
                }

                isScanning = true;
                startQRScanning();

            } catch (error) {
                console.error('Camera access error:', error);
                showScanStatus('Unable to access camera. Please allow camera permissions.', 'error');
            }
        }

        async function startQRScanning() {
            if (!isScanning || !scannerVideo) return;

            const canvas = document.getElementById('scannerCanvas');
            canvas.width = scannerVideo.videoWidth;
            canvas.height = scannerVideo.videoHeight;
            const ctx = canvas.getContext('2d');

            try {
                ctx.drawImage(scannerVideo, 0, 0, canvas.width, canvas.height);
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);

                const result = await codeReader.decodeFromImageData(imageData);

                if (result) {
                    isScanning = false;
                    handleQRCodeScanned(result.text);
                    return;
                }
            } catch (error) {
                // continue scanning
            }

            if (isScanning) {
                setTimeout(startQRScanning, 100);
            }
        }

        function handleQRCodeScanned(qrData) {
            try {
                const attendanceData = JSON.parse(qrData);

                showScanStatus('QR Code detected! Processing...', 'processing');

                const attendanceRecord = {
                    studentName: loggedInStudent.name,
                    studentId: loggedInStudent.id,
                    studentClass: loggedInStudent.class,
                    className: attendanceData.class,
                    section: attendanceData.section,
                    time: attendanceData.time,
                    date: attendanceData.date,
                    sessionId: attendanceData.sessionId,
                    markedAt: new Date().toISOString()
                };

                saveAttendanceRecord(attendanceRecord);

                showScanStatus(`‚úì Attendance marked successfully for ${attendanceData.class}!`, 'success');

                updateStudentAttendance(loggedInStudent.name);

                setTimeout(() => {
                    closeQRScanner();
                    loadAttendanceHistory();
                }, 2000);

            } catch (error) {
                console.error('QR decode error:', error);
                showScanStatus('Invalid QR code. Please scan a valid attendance QR code.', 'error');
                isScanning = true;
                startQRScanning();
            }
        }

        function closeQRScanner() {
            isScanning = false;
            if (scannerStream) {
                scannerStream.getTracks().forEach(track => track.stop());
                if (scannerVideo) scannerVideo.srcObject = null;
            }
            document.getElementById('qrScannerSection').style.display = 'none';
            document.getElementById('scanStatus').style.display = 'none';
        }

        function showScanStatus(message, type) {
            const status = document.getElementById('scanStatus');
            status.textContent = message;
            status.className = 'recognition-status ' + type;
            status.style.display = 'block';
        }

        // Supabase: save attendance
        async function saveAttendanceRecord(record) {
            try {
                const { data, error } = await supabaseClient
                    .from('attendance_records')
                    .insert({
                        student_name: record.studentName,
                        student_id: record.studentId,
                        student_class: record.studentClass,
                        class_name: record.className,
                        section: record.section,
                        time: record.time,
                        date: record.date,
                        session_id: record.sessionId,
                        marked_at: record.markedAt
                    });

                if (error) {
                    console.error('Supabase insert error:', error);
                    showScanStatus('Error saving attendance to database.', 'error');
                    return;
                }

                console.log('Attendance saved in Supabase:', data);
            } catch (error) {
                console.error('Error saving attendance:', error);
                showScanStatus('Unexpected error saving attendance.', 'error');
            }
        }

        // Supabase: load attendance history for logged-in student
        async function loadAttendanceHistory() {
            if (!loggedInStudent) return;

            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '<p style="color: #666;">Loading...</p>';

            try {
                const { data, error } = await supabaseClient
                    .from('attendance_records')
                    .select('*')
                    .eq('student_id', loggedInStudent.id)
                    .order('marked_at', { ascending: false });

                if (error) {
                    console.error('Supabase fetch error:', error);
                    historyList.innerHTML = '<p style="color: #f44336;">Error loading history.</p>';
                    return;
                }

                if (!data || data.length === 0) {
                    historyList.innerHTML = '<p style="color: #666;">No attendance records yet</p>';
                    return;
                }

                historyList.innerHTML = '';
                data.forEach(record => {
                    const recordDiv = document.createElement('div');
                    recordDiv.style.cssText =
                        'padding: 15px; background: #f8f9ff; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid #4CAF50;';

                    const markedDate = new Date(record.marked_at);
                    recordDiv.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                            <div>
                                <strong style="color: #667eea;">${record.class_name}</strong>
                                <p style="color: #666; font-size: 0.9em; margin-top: 5px;">
                                    ${record.section} | ${record.time}
                                </p>
                            </div>
                            <div style="text-align: right;">
                                <div style="color: #4CAF50; font-weight: bold;">‚úì Present</div>
                                <div style="color: #999; font-size: 0.85em; margin-top: 5px;">
                                    ${markedDate.toLocaleDateString()} ${markedDate.toLocaleTimeString()}
                                </div>
                            </div>
                        </div>
                    `;
                    historyList.appendChild(recordDiv);
                });
            } catch (error) {
                console.error('Error loading history:', error);
                historyList.innerHTML = '<p style="color: #f44336;">Error loading history.</p>';
            }
        }

        function updateStudentAttendance(studentName) {
            const badges = document.querySelectorAll('.student-badge');
            badges.forEach(badge => {
                if (badge.textContent === studentName) {
                    badge.classList.add('present');
                    badge.classList.remove('absent');
                }
            });
            updateStats();
        }

        // Open Face Setup Modal
        function openFaceSetup() {
            document.getElementById('faceSetupModal').classList.add('active');
            loadFaceApi();
            loadEnrolledFaces();
        }

        function closeFaceSetup() {
            document.getElementById('faceSetupModal').classList.remove('active');
            stopSetupCamera();
        }

        async function startSetupCamera() {
            setupVideo = document.getElementById('setupVideo');

            try {
                setupStream = await navigator.mediaDevices.getUserMedia({
                    video: { width: 640, height: 480 }
                });
                setupVideo.srcObject = setupStream;

                showSetupStatus('Camera started! Position your face in the frame.', 'processing');
            } catch (error) {
                console.error('Camera access error:', error);
                showSetupStatus('Unable to access camera. Please allow camera permissions.', 'error');
            }
        }

        function stopSetupCamera() {
            if (setupStream) {
                setupStream.getTracks().forEach(track => track.stop());
                if (setupVideo) setupVideo.srcObject = null;
            }
        }

        async function captureFaceData() {
            const studentName = document.getElementById('studentName').value.trim();
            const studentId = document.getElementById('studentId').value.trim();
            const studentClass = document.getElementById('studentClass').value;

            if (!studentName || !studentId) {
                showSetupStatus('Please enter student name and ID', 'error');
                return;
            }

            if (!setupVideo || !setupStream) {
                showSetupStatus('Please start the camera first', 'error');
                return;
            }

            await loadFaceApi();
            showSetupStatus('Detecting face...', 'processing');

            const canvas = document.getElementById('setupCanvas');
            canvas.width = setupVideo.videoWidth;
            canvas.height = setupVideo.videoHeight;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(setupVideo, 0, 0);

            try {
                const detections = await faceapi
                    .detectSingleFace(setupVideo, new faceapi.TinyFaceDetectorOptions())
                    .withFaceLandmarks()
                    .withFaceDescriptor();

                if (!detections) {
                    showSetupStatus('No face detected. Please position your face clearly in the frame.', 'error');
                    return;
                }

                const faceData = {
                    id: studentId,
                    name: studentName,
                    class: studentClass,
                    descriptor: Array.from(detections.descriptor),
                    image: canvas.toDataURL('image/jpeg', 0.8),
                    timestamp: new Date().toISOString()
                };

                enrolledFaces.push(faceData);
                saveFaceDataToBackend(faceData);

                showSetupStatus(`‚úì Face data captured successfully for ${studentName}!`, 'success');

                document.getElementById('studentName').value = '';
                document.getElementById('studentId').value = '';

                loadEnrolledFaces();

            } catch (error) {
                console.error('Face capture error:', error);
                showSetupStatus('Error capturing face data. Please try again.', 'error');
            }
        }

        function saveFaceDataToBackend(faceData) {
            try {
                let savedFaces = JSON.parse(localStorage.getItem('enrolledFaces') || '[]');
                savedFaces.push(faceData);
                localStorage.setItem('enrolledFaces', JSON.stringify(savedFaces));
                console.log('Face data saved to backend (localStorage):', faceData.name);
            } catch (error) {
                console.error('Error saving to backend:', error);
            }
        }

        function loadEnrolledFaces() {
            try {
                enrolledFaces = JSON.parse(localStorage.getItem('enrolledFaces') || '[]');

                const container = document.getElementById('enrolledFaces');
                container.innerHTML =
                    '<h3 style="grid-column: 1/-1; color: #667eea;">Enrolled Students (' +
                    enrolledFaces.length + ')</h3>';

                enrolledFaces.forEach(face => {
                    const card = document.createElement('div');
                    card.className = 'face-card';
                    card.innerHTML = `
                        <img src="${face.image}" alt="${face.name}">
                        <div class="name">${face.name}</div>
                        <div style="font-size: 0.8em; color: #666;">${face.id}</div>
                    `;
                    container.appendChild(card);
                });
            } catch (error) {
                console.error('Error loading enrolled faces:', error);
            }
        }

        async function startCamera() {
            video = document.getElementById('video');

            try {
                stream = await navigator.mediaDevices.getUserMedia({
                    video: { width: 640, height: 480 }
                });
                video.srcObject = stream;

                showRecognitionStatus('Camera started! Detecting faces...', 'processing');

                detectFaces();
            } catch (error) {
                console.error('Camera access error:', error);
                showRecognitionStatus('Unable to access camera. Please allow camera permissions.', 'error');
            }
        }

        function stopCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                if (video) video.srcObject = null;
                showRecognitionStatus('Camera stopped', 'processing');
            }
        }

        async function detectFaces() {
            if (!video || !stream) return;

            await loadFaceApi();

            const detections = await faceapi
                .detectAllFaces(video, new faceapi.TinyFaceDetectorOptions())
                .withFaceLandmarks()
                .withFaceDescriptors();

            if (detections.length > 0) {
                showRecognitionStatus(`${detections.length} face(s) detected`, 'processing');
            }

            setTimeout(detectFaces, 100);
        }

        async function captureAttendance() {
            if (!video || !stream) {
                showRecognitionStatus('Please start the camera first', 'error');
                return;
            }

            await loadFaceApi();
            showRecognitionStatus('Processing attendance...', 'processing');

            try {
                const detections = await faceapi
                    .detectAllFaces(video, new faceapi.TinyFaceDetectorOptions())
                    .withFaceLandmarks()
                    .withFaceDescriptors();

                if (detections.length === 0) {
                    showRecognitionStatus('No faces detected. Please ensure students are in frame.', 'error');
                    return;
                }

                enrolledFaces = JSON.parse(localStorage.getItem('enrolledFaces') || '[]');

                if (enrolledFaces.length === 0) {
                    showRecognitionStatus('No enrolled faces found. Please setup face recognition first.', 'error');
                    return;
                }

                const labeledDescriptors = enrolledFaces.map(face => {
                    return new faceapi.LabeledFaceDescriptors(
                        face.name,
                        [new Float32Array(face.descriptor)]
                    );
                });

                const faceMatcher = new faceapi.FaceMatcher(labeledDescriptors, 0.6);

                let recognizedNames = [];

                detections.forEach(detection => {
                    const bestMatch = faceMatcher.findBestMatch(detection.descriptor);
                    if (bestMatch.label !== 'unknown') {
                        recognizedNames.push(bestMatch.label);
                        console.log('Recognized:', bestMatch.label);
                    }
                });

                const recognizedCount = recognizedNames.length;

                showRecognitionStatus(
                    `‚úì Attendance marked! ${recognizedCount} student(s) recognized out of ${detections.length} detected.`,
                    'success'
                );

                setTimeout(() => {
                    const studentList = document.getElementById('studentList');
                    const badges = studentList.querySelectorAll('.student-badge');
                    badges.forEach(badge => {
                        if (recognizedNames.includes(badge.textContent)) {
                            badge.classList.add('present');
                            badge.classList.remove('absent');
                        }
                    });
                    updateStats();
                }, 500);

            } catch (error) {
                console.error('Attendance capture error:', error);
                showRecognitionStatus('Error processing attendance. Please try again.', 'error');
            }
        }

        function showRecognitionStatus(message, type) {
            const status = document.getElementById('recognitionStatus');
            status.textContent = message;
            status.className = 'recognition-status ' + type;
            status.style.display = 'block';
        }

        function showSetupStatus(message, type) {
            const status = document.getElementById('setupStatus');
            status.textContent = message;
            status.className = 'recognition-status ' + type;
            status.style.display = 'block';
        }

        function showTab(tabName) {
            const sections = document.querySelectorAll('.content-section');
            const buttons = document.querySelectorAll('.tab-btn');

            sections.forEach(section => section.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function selectMethod(method) {
            selectedMethod = method;
            const methods = document.querySelectorAll('.attendance-method');
            methods.forEach(m => m.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
        }

        function startAttendance() {
            if (!selectedMethod) {
                alert('Please select an attendance method first!');
                return;
            }

            if (selectedMethod === 'qr') {
                document.getElementById('qrDisplay').style.display = 'block';
                document.getElementById('faceDisplay').style.display = 'none';

                if (!qrCodeGenerated) {
                    const qrContainer = document.getElementById('qrcode');
                    qrContainer.innerHTML = '';

                    const attendanceData = {
                        class: 'Computer Science 101',
                        section: 'A',
                        time: '10:00 AM - 11:00 AM',
                        date: new Date().toLocaleDateString(),
                        sessionId: 'CS101-' + Date.now()
                    };

                    new QRCode(qrContainer, {
                        text: JSON.stringify(attendanceData),
                        width: 230,
                        height: 230,
                        colorDark: "#667eea",
                        colorLight: "#ffffff",
                        correctLevel: QRCode.CorrectLevel.H
                    });

                    qrCodeGenerated = true;
                }
            } else if (selectedMethod === 'face') {
                document.getElementById('faceDisplay').style.display = 'block';
                document.getElementById('qrDisplay').style.display = 'none';
            } else {
                document.getElementById('qrDisplay').style.display = 'none';
                document.getElementById('faceDisplay').style.display = 'none';
            }

            const studentList = document.getElementById('studentList');
            studentList.innerHTML = '';

            students.forEach((student, index) => {
                const badge = document.createElement('div');
                badge.className = 'student-badge';
                badge.textContent = student;
                badge.classList.add('absent');

                setTimeout(() => {
                    const isPresent = Math.random() > 0.15;
                    if (isPresent) {
                        badge.classList.add('present');
                        badge.classList.remove('absent');
                    }
                    updateStats();
                }, index * 50);

                studentList.appendChild(badge);
            });

            document.getElementById('successMsg').classList.add('show');
            setTimeout(() => {
                document.getElementById('successMsg').classList.remove('show');
            }, 3000);
        }

        function updateStats() {
            const badges = document.querySelectorAll('.student-badge');
            let present = 0;
            badges.forEach(badge => {
                if (badge.classList.contains('present')) present++;
            });

            const total = badges.length || 1;
            const absent = total - present;
            const percentage = Math.round((present / total) * 100);

            document.getElementById('presentCount').textContent = present;
            document.getElementById('absentCount').textContent = absent;
            document.getElementById('percentage').textContent = percentage + '%';
        }

        function generateActivities() {
            const careerGoal = document.getElementById('careerGoal').value;

            const videoInfo = careerVideos[careerGoal];
            const youtubeLink = document.getElementById('youtubeLink');
            youtubeLink.href = videoInfo.url;
            youtubeLink.textContent = '‚ñ∂Ô∏è ' + videoInfo.title;

            alert(`Activities generated based on your career goal: ${careerGoal}\n\nCheck the recommended activities and video below!`);
        }

        function loadSchedule() {
            const student = document.getElementById('studentSelect').value;
            console.log('Loading schedule for:', student);
        }

        // On load: init student list, default video, and restore session
        window.onload = function () {
            const studentList = document.getElementById('studentList');
            students.forEach(student => {
                const badge = document.createElement('div');
                badge.className = 'student-badge';
                badge.textContent = student;
                badge.classList.add('absent');
                studentList.appendChild(badge);
            });

            const defaultCareer = document.getElementById('careerGoal').value;
            const videoInfo = careerVideos[defaultCareer];
            const youtubeLink = document.getElementById('youtubeLink');
            youtubeLink.href = videoInfo.url;
            youtubeLink.textContent = '‚ñ∂Ô∏è ' + videoInfo.title;

            const savedStudent = sessionStorage.getItem('loggedInStudent');
            if (savedStudent) {
                loggedInStudent = JSON.parse(savedStudent);
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('studentDashboard').style.display = 'block';
                document.getElementById('loggedStudentName').textContent = loggedInStudent.name;
                document.getElementById('loggedStudentId').textContent = loggedInStudent.id;
                document.getElementById('loggedStudentClass').textContent = loggedInStudent.class;
                loadAttendanceHistory();
            }
        };
    </script>
</body>

</html>
